<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>JSの練習とかもろもろやる</title>
<style type="text/css">
*{ margin: 0; padding: 0}
#wrap {
	position: relative;
}
header {
	width: 100%;
	height: 300px;
	background-color: blue;
}
footer {
	clear: both;
	width: 100%;
	height: 300px;
	background-color: red;
}
.pageTop {
	width: 40px;
	height: 40px;
	background-color: yellow;
	float: right;

}
#content {
	width: 300px;
	height: 2000px;
	margin: 0 auto;
	background-color: #ddd;
}
#linkTab {
	position: absolute;
	right: 0;
	z-index: 999;
	height: 200px;
	width: 60px;
	background-color: #111;
}

</style>
<script src="./js/jquery-2.1.1.min.js"></script>
<!--script src="./js/jquery-1.11.1.js"></script-->
<script src="./js/main.js"></script>
<script type="text/javascript">

(function($){
	$.fn.linkTab = function(container){

			var self = $(this),
			container = $(container);

			$(window).bind("scroll", function() {
				var docHeight = $(document).height();
				var docWidth = $('#content').width();
				var winHeight = $(window).height();
				var winWidth = $(window).width();

				//ウィンドウの高さ+スクロールされた距離
				var scrollPosition = winHeight + $(window).scrollTop();
				//ヘッダの厚みを取得
				var headHeight = $("header").outerHeight() + 35;
				//フッタの厚みにページTOP足した値を取得
				var footHeight = $("footer").outerHeight() + 100;
				//var topPosition = winHeight / 2;

console.log(scrollPosition);
console.log(docHeight);
console.log(footHeight);

				//縦　ドキュメントの高さ-スクロールされた距離を比較してフッタの高さよりも小さくなったら
				if (scrollPosition >= docHeight-footHeight) {
					self.css({
						"position": "absolute",
						"top": "",
						"bottom": footHeight
					});
				} // 入っときはヘッダーのたかさ
				else if (scrollPosition <= winHeight + 20) {
					self.css({
						"position": "absolute",
						"top": headHeight,
						"bottom": ""
					});
				}
				else if (scrollPosition <= docHeight-headHeight) {
					self.css({
						"position": "fixed",
						"top": headHeight,
						"bottom": ""
					});
				}/* //それ以外は真ん中
				else {
					self.css({
						"position": "fixed",
						"top": topPosition,
						"bottom": ""
					});
				}*/
			});
			$(window).scroll();
	};
})(jQuery);


$(function(){
	//sideBtn
	$('#linkTab').linkTab('#container');
});
</script>
</head>
<body>
<div id="wrap">
<header></header>
<div id="content">

	<div id="linkTab">

	</div>
</div>
<p class="pageTop"></p>
<footer></footer>
</div>
</body>
</html>