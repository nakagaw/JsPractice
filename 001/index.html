<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>JSの練習とかもろもろやる</title>
<style type="text/css">
ul#tabNav01 li,
ul#tabNav02 li {
	display: inline-block;
	*display: inline;
	*zoom: 1;
	padding: 10px;
	border: 1px solid #111;
	list-style: none;
}
ul#tabNav01 li.active,
ul#tabNav02 li.on {
	background-color: #ff0;
}
div#contentsBody div,
div#section div {
	width: 50px;
	padding: 200px;
	background-color: #111;
	color: #fff;
}
pre {
	margin-bottom: 20px;
	padding: 15px;
	border: 5px solid #111;
	background-color: #eee;
}
</style>
<script src="./js/jquery-2.1.1.min.js"></script>
<!--script src="./js/jquery-1.11.1.js"></script-->
<script src="./js/main.js"></script>
<script type="text/javascript">

(function($) {
	$(function() {
	var tab = $('#tabNav01 li');
	var sec = $('#contentsBody div');
	var i =  getCookie('js_xxx');

	if (i>0) {
		$('#contentsBody div:not(:eq('+i+'))').hide();
		tab.removeClass('active').eq(i).addClass('active');
		sec.hide().eq(i).show();
	} else {
		$('#contentsBody div:not(:eq(0))').hide();
		tab.removeClass('active').eq(0).addClass('active');
		sec.hide().eq(0).show();
	}

	tab.click(function (name, value, expires){
			sec.hide();
			tab.removeClass('active');
			$(this).addClass('active');
			var secID = $($(this).find('a').attr("href"));
			secID.show();

			var index = tab.index(this);
			//クッキーの登録
			function setCookie(name, value, expires) {
				var zzz= '';
				zzz+= name + '=' + encodeURIComponent(value);
				if(expires) {
					var exp = new Date();
					exp.setDate(exp.getDate() + expires);
					zzz+= '; expires=' + exp.toGMTString();
				}
				console.log(zzz);
				document.cookie = zzz;
			}
			setCookie('js_xxx', index, 3);  //setCookieに値渡す、expiresは値しか無理
	});
	});
})(jQuery);

//クッキーの登録
function setCookie(name, value, expires, domain, path, secure) {
	var c = '';
	c += name + '=' + encodeURIComponent(value);
	if(expires) {
		var exp = new Date();
		exp.setDate(exp.getDate() + expires);
		c += '; expires=' + exp.toGMTString();
	}
	if(domain) {c += '; domain =' + domain;}
	if(path) {c += '; path =' + path;}
	if(secure) {c += '; secure';}
	document.cookie = c;
}

//クッキー値を取得
function getCookie(name) {
	var cs = document.cookie.split(';');
	for (var i = 0; i < cs.length; i++) {
		var kv = cs[i].split('=');
		if(kv[0] == name) { return decodeURIComponent(kv[1]); }
	}
	return null;
}

var cnt = getCookie('js_cnt');
cnt = cnt ? ++cnt : 1;
setCookie('js_cnt', cnt, 3);  //setCookieに値渡す
document.write('あなたはこのサイトに' + cnt + '回、アクセスしました。');




</script>
</head>
<body>

	<ul id="tabNav01">
		<li class="active"><a href="#sec01">tab A</a></li>
		<li><a href="#sec02">tab B</a></li>
		<li><a href="#sec03">tab C</a></li>
		<li><a href="#sec04">tab D</a></li>
		<li><a href="#sec05">tab E</a></li>
	</ul>
	<div id="contentsBody">
		<div id="sec01">A</div>
		<div id="sec02">B</div>
		<div id="sec03">C</div>
		<div id="sec04">D</div>
		<div id="sec05">E</div>
	</div>
</body>
</html>