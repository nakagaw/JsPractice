<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>JSの練習とかもろもろやる</title>
<style type="text/css">
ul#tabNav01 li,
ul#tabNav02 li {
	display: inline-block;
	*display: inline;
	*zoom: 1;
	padding: 10px;
	border: 1px solid #111;
	list-style: none;
}
ul#tabNav01 li.active,
ul#tabNav02 li.on {
	background-color: #ff0;
}
div#contentsBody div,
div#section div {
	width: 50px;
	padding: 200px;
	background-color: #111;
	color: #fff;
}
pre {
	margin-bottom: 20px;
	padding: 15px;
	border: 5px solid #111;
	background-color: #eee;
}
</style>
<script src="./js/jquery-2.1.1.min.js"></script>
<!--script src="./js/jquery-1.11.1.js"></script-->
<script src="./js/main.js"></script>
<script type="text/javascript">
(function($) {
	$(function() {
		var tab = $('#tabNav01 li');
		var sec = $('#contentsBody div');
		var gtc =  getCookie('js_xxx');

		$('#contentsBody div:not(:eq('+gtc+'))').hide();
		tab.removeClass('active').eq(gtc).addClass('active');
		sec.hide().eq(gtc).show();

		tab.click(function (){
			sec.hide();
			tab.removeClass('active');
			$(this).addClass('active');
			var secID = $($(this).find('a').attr("href"));
			secID.show();

			var index = tab.index(this); //クリックした要素の順番
			//をクッキーに登録
			function setCookie(name, value, expires) {
				var zzz= '';
				zzz+= name + '=' + encodeURIComponent(value);
				if(expires) {
					var exp = new Date();
					exp.setDate(exp.getDate() + expires);
					zzz+= '; expires=' + exp.toGMTString();
				}
				console.log(zzz);
				document.cookie = zzz;
			}
			setCookie('js_xxx', index, 3);  //setCookieに値渡す、expiresは値しか無理
		});

		//クッキー値を取得
		function getCookie(name) {
			var xxx = document.cookie.split(';');
			for (var i = 0; i < xxx.length; i++) {
				var yyy = xxx[i].split('=');
				if(yyy[0] == name) { return decodeURIComponent(yyy[1]); }
			}
			console.log(xxx);
			return null;
		}
	});
})(jQuery);
</script>
</head>
<body>

	<ul id="tabNav01">
		<li class="active"><a href="#sec01">tab A</a></li>
		<li><a href="#sec02">tab B</a></li>
		<li><a href="#sec03">tab C</a></li>
		<li><a href="#sec04">tab D</a></li>
		<li><a href="#sec05">tab E</a></li>
	</ul>
	<div id="contentsBody">
		<div id="sec01">A</div>
		<div id="sec02">B</div>
		<div id="sec03">C</div>
		<div id="sec04">D</div>
		<div id="sec05">E</div>
	</div>
</body>
</html>